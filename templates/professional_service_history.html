{% extends 'layout.html' %}

{% block title %}
    Professional Service History - Homemakers
{% endblock %}

{% block content %}

    {% include 'navbar.html' %}

    <div class="container-fluid mt-3">
        <h1>Service History for: {{professional.name}}</h1>
        
        <h3 class="mt-3">Pending Requests</h3>
        <table class="table table-striped table-hover table-sm mt-3">
            <thead>
                <tr>
                    <th>Customer Name</th>
                    <th>Address</th>
                    <th>Pincode</th>
                    <th>Description</th>
                    <th>Request Type</th>
                    <th>Date Created</th>
                </tr>
            </thead>
            <tbody>
                {% if not pending_requests %}   
                <tr>
                    <td colspan="12" class="text-center">No pending requests</td>
                </tr>
                {% endif %}
                {% for request in pending_requests %}
                <tr>
                    <td>{{ request.customer.name }}</td>
                    <td>{{ request.customer.address }}</td>
                    <td>{{ request.customer.pincode }}</td>
                    <td>{{ request.description }}</td>
                    <td>{{ request.request_type }}</td>
                    <td>{{ request.date_created }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <hr class="mt-5">

        <h3>Accepted Requests</h3>
        <table class="table table-striped table-hover table-sm mt-3">
            <thead>
                <tr>
                    <th>Customer Name</th>
                    <th>Address</th>
                    <th>Pincode</th>
                    <th>Description</th>
                    <th>Request Type</th>
                    <th>Date Created</th>
                </tr>
            </thead>
            <tbody>
                {% if not accepted_requests %}
                <tr>
                    <td colspan="12" class="text-center">No accepted requests</td>
                </tr>
                {% endif %}
                {% for request in accepted_requests %}
                <tr>
                    <td>{{ request.customer.name }}</td>
                    <td>{{ request.customer.address }}</td>
                    <td>{{ request.customer.pincode }}</td>
                    <td>{{ request.description }}</td>
                    <td>{{ request.request_type }}</td>
                    <td>{{ request.date_created }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <hr class="mt-5">

        <h3>Rejected Requests</h3>
        <table class="table table-striped table-hover table-sm mt-3">
            <thead>
                <tr>
                    <th>Customer Name</th>
                    <th>Address</th>
                    <th>Pincode</th>
                    <th>Description</th>
                    <th>Request Type</th>
                    <th>Date Created</th>
                </tr>
            </thead>
            <tbody>
                {% if not rejected_requests %}
                <tr>
                    <td colspan="12" class="text-center">No rejected requests</td>
                </tr>
                {% endif %}
                {% for request in rejected_requests %}
                <tr>
                    <td>{{ request.customer.name }}</td>
                    <td>{{ request.customer.address }}</td>
                    <td>{{ request.customer.pincode }}</td>
                    <td>{{ request.description }}</td>
                    <td>{{ request.request_type }}</td>
                    <td>{{ request.date_created }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <hr class="mt-5">

        <h3>Closed Requests</h3>
        <table class="table table-striped table-hover table-sm mt-3">
            <thead>
                <tr>
                    <th>Customer Name</th>
                    <th>Address</th>
                    <th>Pincode</th>
                    <th>Description</th>
                    <th>Request Type</th>
                    <th>Date Created</th>
                    <th>Customer Rating</th>
                    <th>Customer Review</th>
                    <th>Date Closed</th>
                </tr>
            </thead>
            <tbody>
                {% if not closed_requests %}
                <tr>
                    <td colspan="12" class="text-center">No closed requests</td>
                </tr>
                {% endif %}
                {% for request in closed_requests %}
                <tr>
                    <td>{{ request.customer.name }}</td>
                    <td>{{ request.customer.address }}</td>
                    <td>{{ request.customer.pincode }}</td>
                    <td>{{ request.description }}</td>
                    <td>{{ request.request_type }}</td>
                    <td>{{ request.date_created }}</td>
                    <td>{{ request.customer_rating }}</td>
                    <td>{{ request.customer_review }}</td>
                    <td>{{ request.date_closed }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

{% endblock %}